(window["webpackJsonpskalodromio-front"]=window["webpackJsonpskalodromio-front"]||[]).push([[0],{1:function(e,t,n){e.exports={drawer:"ShoppingCart_drawer__3denB",closed__empty:"ShoppingCart_closed__empty__1CNuv",closed__full:"ShoppingCart_closed__full__1x9AH",open__full:"ShoppingCart_open__full__A231F",open__empty:"ShoppingCart_open__empty__iYeG2",shader:"ShoppingCart_shader__3KrvX",open:"ShoppingCart_open__3pOnj",empty:"ShoppingCart_empty__3rNwF",closed:"ShoppingCart_closed__1PMk6",content:"ShoppingCart_content__NYV4z",openEmpty:"ShoppingCart_openEmpty__Zac35",title:"ShoppingCart_title__fvtda",p:"ShoppingCart_p__2WJ-E",man:"ShoppingCart_man__1abMx",accordionClosed:"ShoppingCart_accordionClosed__12nUu",priceList:"ShoppingCart_priceList__thwDZ",icon:"ShoppingCart_icon__pPJng",mtop1:"ShoppingCart_mtop1__3g-8C",mtop2:"ShoppingCart_mtop2__b5g0t",mtop3:"ShoppingCart_mtop3__6DQrs",mtop4:"ShoppingCart_mtop4__1eteN",flex:"ShoppingCart_flex__J_tjy",item:"ShoppingCart_item__1lkYf",arrow:"ShoppingCart_arrow__2FrRu",subtitle:"ShoppingCart_subtitle__1V1Ur",count:"ShoppingCart_count__49o3M",product:"ShoppingCart_product__2f0rc",duplicate:"ShoppingCart_duplicate__y5x9p",dashed:"ShoppingCart_dashed__2gde9",vrd:"ShoppingCart_vrd__3eCW6",comments:"ShoppingCart_comments__3pysG",pay:"ShoppingCart_pay__3HqBh",flexColumn:"ShoppingCart_flexColumn__1R3rz",vr:"ShoppingCart_vr__3nX1g",flexD:"ShoppingCart_flexD__Pn4lV",flex1:"ShoppingCart_flex1__2l_TE",flex2:"ShoppingCart_flex2__2TDNd",hidden:"ShoppingCart_hidden__39Szq",visible:"ShoppingCart_visible__39ovU",list:"ShoppingCart_list__3VFfQ",exitIcon:"ShoppingCart_exitIcon__3dN4k",dashed1:"ShoppingCart_dashed1__3hotD",header:"ShoppingCart_header__qTWjf",paidProduct:"ShoppingCart_paidProduct__2LbYH",contextedWrapper:"ShoppingCart_contextedWrapper__2Ge1q",contexted:"ShoppingCart_contexted__3BNsj",clearfixHack:"ShoppingCart_clearfixHack__sPyza",mw30:"ShoppingCart_mw30__zx5w4",tableLayout:"ShoppingCart_tableLayout__322EE",tableHash:"ShoppingCart_tableHash__YLJ41",tableNum:"ShoppingCart_tableNum__2kzDw",payWarn:"ShoppingCart_payWarn__2Ugzp",warnText:"ShoppingCart_warnText__1wu0v",warnOrder:"ShoppingCart_warnOrder__2yBXV",drawerWarn:"ShoppingCart_drawerWarn__2xwU-","lds-ring":"ShoppingCart_lds-ring__1AZsQ",doneProduct:"ShoppingCart_doneProduct__1vnqk",headerCenter:"ShoppingCart_headerCenter__M34wV",headerRight:"ShoppingCart_headerRight__1haO1",headerRightItem:"ShoppingCart_headerRightItem__1_L1E",paymentDiv:"ShoppingCart_paymentDiv__2z343",togoIcon:"ShoppingCart_togoIcon__3BNMD",menuBar:"ShoppingCart_menuBar__1C_bu",left:"ShoppingCart_left__36MaM",right:"ShoppingCart_right__1lMr0",card:"ShoppingCart_card__RYVZm",liveCard:"ShoppingCart_liveCard__2YPro",liveBub:"ShoppingCart_liveBub__3mfTU",miniCard:"ShoppingCart_miniCard__1oqqW",row:"ShoppingCart_row__3aGem",login:"ShoppingCart_login__32U7M",section:"ShoppingCart_section__3DhMI",sectionHeader:"ShoppingCart_sectionHeader__3gyr-"}},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),c=n.n(o),l=n(2),i=n(15),u=n(51),s=n(36),p=n(20);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={isAdmin:!1,events:[{name:"\u0421\u043e\u0440\u0435\u0432\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e \u0441\u043a\u0430\u043b\u043e\u043b\u0430\u0437\u0430\u043d\u0438\u044e 2019 \u043d\u043e\u044f\u0431\u0440\u044c",dateStart:"2019-11-22T12:33:50.825Z",dateEnd:"2019-12-23T12:33:50.825Z",slug:"123457",routes:["1","2","3"],participants:[{slug:"1",scores:[{routeSlug:"1",score:5,attempt:1},{routeSlug:"2",score:7,attempt:1},{routeSlug:"3",score:4,attempt:2}]},{slug:"2",scores:[{routeSlug:"1",score:3,attempt:3},{routeSlug:"2",score:1,attempt:4}]},{slug:"3",scores:[{routeSlug:"1",score:4,attempt:3},{routeSlug:"2",score:1,attempt:4}]},{slug:"4",scores:[{routeSlug:"1",score:7,attempt:3},{routeSlug:"2",score:2,attempt:4}]},{slug:"5",scores:[{routeSlug:"1",score:5,attempt:3},{routeSlug:"2",score:0,attempt:4}]},{slug:"6",scores:[{routeSlug:"1",score:10,attempt:3},{routeSlug:"2",score:10,attempt:4}]}]},{name:"\u0421\u043e\u0440\u0435\u0432\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e \u0441\u043a\u0430\u043b\u043e\u043b\u0430\u0437\u0430\u043d\u0438\u044e 2019 \u043e\u043a\u0442\u044f\u0431\u0440\u044c",dateStart:"2019-10-22T12:33:50.825Z",dateEnd:"2019-11-10T12:33:50.825Z",slug:"123456",routes:["4","5","6"],participants:[]}],users:[{slug:"1",name:"Ivan Sidorov",groupAge:"2",district:"2",organization:"2",gender:"male",scores:[]},{slug:"2",name:"Gleb Petrov",groupAge:"2",district:"2",organization:"2",gender:"male",scores:[]},{slug:"3",name:"Yuri Gagarin",groupAge:"2",district:"2",organization:"2",gender:"male",scores:[]},{slug:"4",name:"Konstantin Bykov",groupAge:"1",district:"2",organization:"2",gender:"male",scores:[]},{slug:"5",name:"Evhenii Kovalenko",groupAge:"1",district:"1",organization:"3",gender:"male",scores:[]},{slug:"6",name:"Genadii Panasenko",groupAge:"1",district:"1",organization:"1",gender:"male",scores:[]}],ages:[{slug:"1",age:"2005-2006"},{slug:"2",age:"2007-2008"}],districts:[{slug:"1",name:"Suvorov"},{slug:"2",name:"Korabel"}],organizations:[{slug:"1",name:"School \u211685"},{slug:"2",name:"School \u211635"},{slug:"3",name:"School \u211665"}],routes:[{slug:"1",name:"1",sector:"123",maxScore:10},{slug:"2",name:"2",sector:"123",maxScore:10},{slug:"3",name:"3",sector:"123",maxScore:10},{slug:"4",name:"4",sector:"124",maxScore:10},{slug:"5",name:"5",sector:"124",maxScore:10},{slug:"6",name:"6",sector:"125",maxScore:10}],sectors:[{slug:"123",name:"Red"},{slug:"124",name:"Green"},{slug:"125",name:"Blue"},{slug:"126",name:"Black"}]},f=function(e){return{type:"UPDATE_SCORES",payload:{userData:e}}},v=function(e){return{type:"CREATE_USER",payload:{userData:e}}},_=n(114),h=n(113),b=function(e,t){return Object(_.a)(Object(h.a)("slug",e),t)},E=function(e){return e.menu.events},O=function(e){return e.menu.routes},S=function(e){return function(t){return b(t,e.menu.events)}},y=function(e){return e.menu.users},j=function(e){return e.menu.isAdmin},C=function(e){return e.menu.ages},w=function(e){return e.menu.organizations},x=function(e){return e.menu.districts},D=function(e){return function(t){return b(t,e.menu.users)}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EVENTS":var n=t.payload.events;return m({},e,{events:n});case"ADD_USERS":var a=t.payload.users;return m({},e,{users:a});case"ADD_AGES":var r=t.payload.ages;return m({},e,{ages:r});case"ADD_DISTRICTS":var o=t.payload.districts;return m({},e,{districts:o});case"ADD_ORGS":var c=t.payload.organizations;return m({},e,{organizations:c});case"ADD_ROUTES":var l=t.payload.routes;return m({},e,{routes:l});case"VALIDATE_ADMIN":var i=t.payload.loginData,u=!1;return"admin@skalodrom.io"===i.login&&"zelen"===i.password&&(u=!0),m({},e,{isAdmin:u});case"CREATE_USER":var p=t.payload.userData,g=e.users.length+1+"";return m({},e,{users:[].concat(Object(s.a)(e.users),[m({},p,{scores:[],slug:g})]),events:e.events.map((function(e){return e.slug===p.event?m({},e,{participants:[].concat(Object(s.a)(e.participants),[{slug:g,scores:e.routes.map((function(e){return{routeSlug:e,score:0,attempt:0}}))}])}):e}))});case"UPDATE_SCORES":var f=t.payload.userData,v=f.slug;return m({},e,{events:e.events.map((function(e){return e.slug===f.event?m({},e,{participants:e.participants.map((function(e){return e.slug===v?{slug:v,scores:e.scores.map((function(e){var t=f.scores.filter((function(t){return t.routeSlug===e.routeSlug}));return t.length>0?t[0]:e}))}:e}))}):e}))});default:return e}},k=function(e,t){return t.type,e},A=n(32),P=(n.n(A).a,Object(i.combineReducers)({menu:N})),I=n(54),R=Object(i.createStore)((function(e,t){var n=P(e,t);return k(n,t)}),Object(u.devToolsEnhancer)()),L={store:R,persistor:Object(I.a)(R)},V=(n(67),n(12)),T=n(21),z=n(1),H=n.n(z);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var U=r.a.createElement("circle",{cx:18.3935,cy:18.099,r:18.099,fill:"black"}),Z=r.a.createElement("rect",{x:14.3936,y:19.1443,width:2,height:6,rx:1,transform:"rotate(90 14.3936 19.1443)",fill:"white"}),G=r.a.createElement("rect",{x:21.3936,y:14.6133,width:2,height:6,rx:1,transform:"rotate(90 21.3936 14.6133)",fill:"white"}),W=r.a.createElement("rect",{x:28.3936,y:19.1443,width:2,height:6,rx:1,transform:"rotate(90 28.3936 19.1443)",fill:"white"}),F=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.3936 9.01562H26.3936V17.1442H24.3936V9.01562ZM24.3936 19.1442H26.3936V21.1442H24.3936V19.1442ZM24.3936 23.1442V26.9496H26.3936V23.1442H24.3936Z",fill:"white"}),J=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3936 8.99109H12.3936V17.1442H10.3936V8.99109ZM10.3936 19.1442V21.1442H12.3936V19.1442H10.3936ZM10.3936 23.1442H12.3936V26.9805H10.3936V23.1442Z",fill:"white"}),Y=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.3936 8.9884H17.3936V12.605L19.3936 12.605V8.9884ZM17.3936 26.9985V18.6277H19.3936V26.9985H17.3936Z",fill:"white"}),q=function(e){var t=e.svgRef,n=e.title,a=M(e,["svgRef","title"]);return r.a.createElement("svg",B({width:37,height:37,viewBox:"0 0 37 37",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,U,Z,G,W,F,J,Y)},K=r.a.forwardRef((function(e,t){return r.a.createElement(q,B({svgRef:t},e))})),Q=(n.p,function(e){Object(l.b)();var t=Object(T.f)(),n=Object(l.c)(E);console.log("home");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:function(){t.push("/settings")},className:H.a.left},r.a.createElement(K,{className:H.a.iconSvg})),r.a.createElement("div",{onClick:function(){t.push("/")}},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f")),r.a.createElement("div",{className:H.a.content},n.map((function(e){return r.a.createElement(V.b,{key:e.slug,to:"/event/".concat(e.slug),className:H.a.card},r.a.createElement("div",null,e.name),new Date-new Date(e.dateStart)>0&&new Date-new Date(e.dateEnd)<0?r.a.createElement("div",{className:H.a.liveCard},r.a.createElement("div",{className:H.a.liveBub}),r.a.createElement("div",null,"LIVE")):"")}))))}),X=n(5);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var te=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0002 13.4142L17.293 18.7071L18.7072 17.2928L13.4144 12L18.7073 6.70706L17.2931 5.29285L12.0002 10.5858L6.70718 5.29285L5.29297 6.70706L10.5859 12L5.29312 17.2928L6.70733 18.7071L12.0002 13.4142Z"}),ne=function(e){var t=e.svgRef,n=e.title,a=ee(e,["svgRef","title"]);return r.a.createElement("svg",$({width:24,height:24,viewBox:"0 0 24 24",fill:"#ffffff",ref:t},a),n?r.a.createElement("title",null,n):null,te)},ae=r.a.forwardRef((function(e,t){return r.a.createElement(ne,$({svgRef:t},e))})),re=(n.p,function(e){Object(l.b)();var t=Object(T.f)(),n=Object(a.useState)(""),o=Object(X.a)(n,2),c=o[0],i=o[1],u=function(){t.push("/")},s=Object(l.c)(y).filter((function(e){return e.name.indexOf(c)>=0}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:u,className:H.a.left},r.a.createElement(ae,{className:H.a.iconSvg})),r.a.createElement("div",{onClick:u},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"),r.a.createElement("div",null)),r.a.createElement("div",{className:H.a.content},r.a.createElement("input",{value:c,onChange:function(e){return i(e.target.value)}}),s.map((function(e){return r.a.createElement(V.b,{key:e.slug,to:"/user/".concat(e.slug),className:H.a.card},r.a.createElement("div",null,e.name," (",e.groupAge,")"))}))))});function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e){Object(l.b)();for(var t=Object(l.c)(j),n=Object(T.f)(),o=Object(a.useState)(""),c=Object(X.a)(o,2),i=c[0],u=c[1],s=Object(T.g)().eventId,p=Object(l.c)(S)(s),g=Object(l.c)(C),m=(Object(l.c)(w),Object(l.c)(y)),d=(Object(l.c)(O),m.filter((function(e){return p.participants.filter((function(t){return t.slug===e.slug})).length>0})).map((function(e){return ce({},e,{groupAge:g.filter((function(t){return t.slug===e.groupAge}))[0].age})}))),f=d.map((function(e){return e.groupAge})).filter(ue),v=d.map((function(e){return e.gender})).filter(ue),_=[],h=0;h<f.length;h++)for(var b=0;b<v.length;b++)_.push({age:f[h],gender:v[b]});var E=d.map((function(e){var t=p.participants.filter((function(t){return t.slug===e.slug}))[0];return ce({},e,{scores:t.scores})})).sort((function(e,t){return t.scores.reduce((function(e,t){return e+t.score}),0)-e.scores.reduce((function(e,t){return e+t.score}),0)})),x=function(){n.push("/")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:x,className:H.a.left},r.a.createElement(ae,{className:H.a.iconSvg})),r.a.createElement("div",{onClick:x},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"),r.a.createElement("div",null)),r.a.createElement("div",{className:H.a.content},r.a.createElement("div",{style:{margin:"16px 4px",display:"flex",justifyContent:"center"}},p.name),r.a.createElement("input",{value:i,onChange:function(e){return u(e.target.value)},placeholder:"\u041f\u043e\u0438\u0441\u043a \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u043f\u043e \u0438\u043c\u0435\u043d\u0438"}),t?r.a.createElement(V.b,{to:"/event/".concat(s,"/newUser"),className:H.a.login},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"):"",_.map((function(e){return r.a.createElement("div",{className:H.a.section},r.a.createElement("div",{className:H.a.sectionHeader},e.age," ","male"===e.gender?"\u041c\u0430\u043b\u044c\u0447\u0438\u043a\u0438":"\u0414\u0435\u0432\u043e\u0447\u043a\u0438"),E.filter((function(t){return t.groupAge===e.age&&t.gender===e.gender})).map((function(e,t){return r.a.createElement(ie,{search:i,key:t,index:t,user:e,eventId:s})})))}))))},ie=function(e){var t=e.user,n=e.eventId,a=e.index,o=e.search;return r.a.createElement(V.b,{style:{display:t.name.indexOf(o)>=0?"block":"none"},key:t.slug,to:"/event/".concat(n,"/user/").concat(t.slug),className:H.a.card},r.a.createElement("div",null,a+1," ",t.name," (",t.groupAge,")"),r.a.createElement("div",null,"\u0421\u0443\u043c\u043c\u0430 \u0431\u0430\u043b\u043e\u0432:"," ",t.scores.reduce((function(e,t){return e+t.score}),0)))};function ue(e,t,n){return n.indexOf(e)===t}var se=n(53),pe=n.n(se),ge=n(6),me=n.n(ge),de=n(18),fe=n(19),ve=n.n(fe);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=function(){var e=Object(de.a)(me.a.mark((function e(t,n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.post("/api/event/participants",{slug:n.slug,user:n.user});case 2:e.sent,t(f(he({},n.user,{event:n.slug})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(de.a)(me.a.mark((function e(t,n){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.post("/api/user",{name:n.name,groupAge:n.groupAge,district:n.district,organization:n.organization,gender:n.gender});case 2:a=e.sent,t(v(n)),be(t,{user:{slug:a,scores:n.result},slug:n.eventId});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/event");case 2:n=e.sent,console.log(n),t({type:"ADD_EVENTS",payload:{events:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/user");case 2:n=e.sent,console.log(n),t({type:"ADD_USERS",payload:{users:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/age");case 2:n=e.sent,console.log(n),t({type:"ADD_AGES",payload:{ages:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/district");case 2:n=e.sent,console.log(n),t({type:"ADD_DISTRICTS",payload:{districts:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/organization");case 2:n=e.sent,console.log(n),t({type:"ADD_ORGS",payload:{organizations:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(de.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get("/api/route");case 2:n=e.sent,console.log(n),t({type:"ADD_ROUTES",payload:{routes:n.data}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){var t=Object(l.b)(),n=Object(T.f)(),o=Object(a.useState)(""),c=Object(X.a)(o,2),i=c[0],u=(c[1],Object(T.g)()),s=u.eventId,p=u.userId,g=Object(a.useRef)(),m=Object(l.c)(S)(s),d=Object(l.c)(D)(p),f=Object(l.c)(O),v=Object(l.c)(j),_=Object(l.c)(C);Object(a.useEffect)((function(){pe.a.toCanvas(g.current,"".concat(window.location.origin).concat(window.location.pathname),(function(e){e&&console.error(e),console.log("success!")}))}),[]);var h=m.participants.filter((function(e){return e.slug===p})),b=h.length>0?De({},d,{},h[0],{groupAge:_.filter((function(e){return e.slug===d.groupAge}))[0].age}):[],E=Object(a.useState)(b),y=Object(X.a)(E,2),w=y[0],x=y[1];if(0===h.length)return null;var N=f.filter((function(e){return e.name.indexOf(i)>=0}));return console.log(b),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:function(){n.push("/event/".concat(s))},className:H.a.left},r.a.createElement(ae,{className:H.a.iconSvg})),r.a.createElement("div",null,b.name," (",b.groupAge,")"),r.a.createElement("div",null)),r.a.createElement("div",{className:H.a.content},r.a.createElement("div",{className:H.a.card},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},r.a.createElement("div",null,b.name," (",b.groupAge,")"),r.a.createElement("div",null,r.a.createElement("canvas",{ref:g,id:"userCanvas"}))),r.a.createElement("div",{className:H.a.miniCard},r.a.createElement("div",null,"\u0422\u0440\u0430\u0441\u0441\u0430"),r.a.createElement("div",null,"\u0411\u0430\u043b\u043b\u044b"),r.a.createElement("div",null,"\u041f\u043e\u043f\u044b\u0442\u043e\u043a")),r.a.createElement(ke,{localUser:w,setLocalUser:x,isAdmin:v,user:b,filterRoutes:N,routes:f}),v?r.a.createElement("div",{onClick:function(e){be(t,{user:w,slug:s}),n.push("/event/".concat(s))},className:H.a.login},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"):"")))},ke=function(e){var t=e.user,n=e.filterRoutes,a=e.routes,o=e.isAdmin,c=e.localUser,l=e.setLocalUser;return!1===o&&t,c.scores.filter((function(e){return n.filter((function(t){return e.routeSlug===t.slug})).length>0})).map((function(e,t){return r.a.createElement("div",{key:t,className:H.a.miniCard},r.a.createElement("div",null,a.filter((function(t){return t.slug===e.routeSlug}))[0].name," "),o?r.a.createElement("input",{value:e.score,onChange:function(t){l(De({},c,{scores:c.scores.map((function(n){return n.routeSlug===e.routeSlug?De({},n,{score:parseInt(t.target.value)}):n}))}))}}):r.a.createElement("div",null,e.score),o?r.a.createElement("input",{value:e.attempt,onChange:function(t){return l(De({},c,{scores:c.scores.map((function(n){return n.routeSlug===e.routeSlug?De({},n,{attempt:parseInt(t.target.value)}):n}))}))}}):r.a.createElement("div",null,e.attempt))}))},Ae=function(e){var t=Object(a.useState)(!1),n=Object(X.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),u=Object(X.a)(i,2),s=u[0],p=u[1],g=Object(a.useState)(""),m=Object(X.a)(g,2),d=m[0],f=m[1],v=Object(l.b)(),_=Object(T.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:function(){_.push("/")},className:H.a.left},r.a.createElement(ae,{className:H.a.iconSvg})),r.a.createElement("div",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("div",null)),r.a.createElement("div",{style:{alignItems:"center"},className:H.a.content},r.a.createElement("div",{className:H.a.row,onClick:function(e){return c(!o)},style:{display:"flex",alignItems:"center",justifyContent:"center"}},"\u0412\u0445\u043e\u0434 \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"),o?r.a.createElement("input",{placeholder:"Email",className:H.a.row,value:s,onChange:function(e){return p(e.target.value)}}):"",o?r.a.createElement("input",{placeholder:"password",type:"password",className:H.a.row,value:d,onChange:function(e){return f(e.target.value)}}):"",o&&s.length>0?r.a.createElement("div",{onClick:function(e){v({type:"VALIDATE_ADMIN",payload:{loginData:{login:s,password:d}}})},className:H.a.login},"\u0412\u043e\u0439\u0442\u0438"):""))},Pe=function(e){var t=Object(l.b)(),n=Object(T.f)(),o=Object(a.useState)(""),c=Object(X.a)(o,2),i=c[0],u=(c[1],Object(T.g)()),s=u.eventId,p=(u.userId,Object(l.c)(S)(s)),g=Object(l.c)(O),m=Object(l.c)(j),d=Object(l.c)(C),f=Object(a.useState)(d[0]),v=Object(X.a)(f,2),_=v[0],h=v[1],b=Object(l.c)(w),E=Object(a.useState)(b[0]),y=Object(X.a)(E,2),D=y[0],N=y[1],k=Object(l.c)(x),A=Object(a.useState)(k[0]),P=Object(X.a)(A,2),I=P[0],R=P[1],L=Object(a.useState)(""),V=Object(X.a)(L,2),z=V[0],B=V[1],M=Object(a.useState)("male"),U=Object(X.a)(M,2),Z=U[0],G=U[1];g.filter((function(e){return e.name.indexOf(i)>=0}));return!1===m?(console.log("fail login"),r.a.createElement(T.a,{to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:H.a.menuBar},r.a.createElement("div",{onClick:function(){n.push("/event/".concat(s))},className:H.a.left},r.a.createElement(ae,{className:H.a.iconSvg})),r.a.createElement("div",null,"\u041d\u043e\u0432\u044b\u0439 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a"),r.a.createElement("div",null)),r.a.createElement("div",{className:H.a.content},r.a.createElement("div",{className:H.a.card},r.a.createElement("div",null,"Select age"),r.a.createElement("select",{value:_.slug,onChange:function(e){h(d.filter((function(t){return t.slug===e.target.value}))[0])}},r.a.createElement("option",{disabled:!0},"Select age"),d.map((function(e){return r.a.createElement("option",{key:e.slug,value:e.slug},e.age)}))),r.a.createElement("div",null,"Select organization"),r.a.createElement("select",{value:D.slug,onChange:function(e){N(b.filter((function(t){return t.slug===e.target.value}))[0])}},r.a.createElement("option",{disabled:!0},"Select organization"),b.map((function(e){return r.a.createElement("option",{key:e.slug,value:e.slug},e.name)}))),r.a.createElement("div",null,"Select district"),r.a.createElement("select",{value:I.slug,onChange:function(e){R(k.filter((function(t){return t.slug===e.target.value}))[0])}},r.a.createElement("option",{disabled:!0},"Select district"),k.map((function(e){return r.a.createElement("option",{key:e.slug,value:e.slug},e.name)}))),r.a.createElement("div",null,"Select gender"),r.a.createElement("select",{value:Z,onChange:function(e){G(e.target.value)}},r.a.createElement("option",{disabled:!0},"Select gender"),r.a.createElement("option",{value:"female"},"\u0414\u0435\u0432\u043e\u0447\u043a\u0430"),r.a.createElement("option",{value:"male"},"\u041c\u0430\u043b\u044c\u0447\u0438\u043a")),r.a.createElement("div",null,"Input name"),r.a.createElement("input",{placeholder:"Input name",value:z,onChange:function(e){return B(e.target.value)}}),r.a.createElement("div",{onClick:function(e){var a={name:z,groupAge:_.slug,district:I.slug,organization:D.slug,event:s,gender:Z,scores:p.routes.map((function(e){return{routeSlug:e,score:0,attempt:0}}))};Ee(t,a),n.push("/event/".concat(s))},className:H.a.login},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(111);c.a.render(r.a.createElement(l.a,{store:L.store},r.a.createElement((function(e){return console.log("app"),function(){var e=Object(l.b)();Object(a.useEffect)((function(){Oe(e),Se(e),ye(e),je(e),Ce(e),we(e)}),[])}(),function(){var e=Object(l.b)();Object(a.useEffect)((function(){var t,n=function(t){var n=JSON.parse(t.data);e(f(he({},n.user,{event:n.eventId})))},a=function(t){var n=JSON.parse(t.data);e(v(n))};return function e(){(t=new EventSource("/sse/channel")).onerror=function(n){n.target.readyState===EventSource.CONNECTING?console.log("Channel: Reconnecting..."):n.target.readyState===EventSource.CLOSED&&(console.log("Channel: Connection failed permanently. Reconnecting..."),t.close(),setTimeout((function(){e()}),2e3))},t.onopen=function(){t.addEventListener("add_new_participant",n),t.addEventListener("add_new_user",a)}}(),function(){t.removeEventListener("add_new_participant",n),t.removeEventListener("add_new_user",a),t.close()}}),[])}(),r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,null,r.a.createElement(T.b,{exact:!0,path:"/",component:Q}),r.a.createElement(T.b,{exact:!0,path:"/event/:eventId",component:le}),r.a.createElement(T.b,{exact:!0,path:"/event/:eventId/newUser",component:Pe}),r.a.createElement(T.b,{exact:!0,path:"/event/:eventId/user/:userId",component:Ne}),r.a.createElement(T.b,{exact:!0,path:"/user/:userId",component:Q}),r.a.createElement(T.b,{exact:!0,path:"/users",component:re}),r.a.createElement(T.b,{exact:!0,path:"/route/:routeId",component:Q}),r.a.createElement(T.b,{exact:!0,path:"/sector/:sectorId",component:Q}),r.a.createElement(T.b,{path:"/register",component:Q}),r.a.createElement(T.b,{path:"/runner",component:Q}),r.a.createElement(T.b,{path:"/dashboard",component:Q}),r.a.createElement(T.b,{path:"/settings",component:Ae})))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.history.scrollRestoration="manual",document.addEventListener("gesturestart",(function(e){e.preventDefault()})),document.getElementById("root").addEventListener("click",(function(){}))},56:function(e,t,n){e.exports=n(112)},67:function(e,t,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.e795cc7f.chunk.js.map